# 😛 스프링 핵심 원리 이해1 - 예제 만들기

---

## 💫 1. 프로젝트 생성

- Spring 도움 없이 우리가 역할과 구현을 나누고 이걸 순수한 자바 코드로 개발해 봅시당!
    - 실제 요구사항이 나중에 변경 됐을 때 정말 유연하게 잘 대처가 가능할지 볼까요? :)
- 순수자바로 개발하겠지만 스프링 부트로 하면 세팅하기 편하니까 ^^;; 나중에 스프링 적용할때 라이브러리도 필요하구.. 그러니까 무튼 일단은 스프링 부트로 프로젝트 생성하겟슘다!

![Untitled](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/27aa0366-f430-4f65-bcbc-ae2484f4e6f8)


- Dependencies를 아무것도 선택하지 않으면 스프링 부트가 코어 쪽 라이브러리만 가지고 정말 가장 간단하게 구성해 줌. 의존관계 NO!

![Untitled 1](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/2a71d198-3099-425e-a999-a09b1393d4e4)


---

## 💫 2. 예제 만들기

### 💫 2-1. 비즈니스 요구 사항과 설계

- 예시
    
    > 회원
    > 
    > - 회원을 가입하고 조회가 가능
    > - 회원은 일반과 VIP 두 가지 등급이 존재
    > - 회원 데이터는 자체 DB를 구축할 수 있고, 외부 시스템과 연동할 수 있음. **(미확실)** → 우리는 걱정하지 않아도 됨! 인터페이스 구현 역할과 구현으로 구분을 하면 되기 때문!
    
    > 주문과 할인 정책
    > 
    > - 회원은 상품을 주문할 수 있음
    > - 회원 등급에 따라 할인정책을 적용
    > - 회원 정책은 모든 VIP는 1000원을 할인해 주는 고정 금액 할일을 적용(나중에 변경 가능)
    > - **할인 정책은 변경 가능성이 높음. 회사의 기본 할인 정책을 아직 정하지 못했고, 오픈 직전까지 고민을 미룰것임. 최악의 경우 할인을 적용하지 않을수도…**
- 이러한 미확정 부분들 때문에 개발을 무기한 연기할 수는 없음.
    - ***인터페이스를 만들고 구현체를 언제든지 갈아끼울 수 있도록 설계***하면 된다!

---

### 💫 2-2. 회원 도메인 설계

- **도메인 협력 관계**:
    - 기획자들도 볼 수 있는 그림.
    - 이 관계도를 바탕으로 개발자가 구체화해서 클래스 다이어그램을 만들어 냄.
- **클래스 다이어그램**:
    - 인터페이스랑 구현체들의 관계그림
    - 실제 서버를 실행하지 않고 클래스들만 분석해서 볼 수 있는 그림.
- **객체 다이어그램:**
    - 서버가 실제 떠서 클라이언트가 실제 사용하는 멤버 서비스 임플, 메모리 멤버 리포지토리  → 실제 new한 인스터스끼리의 참조

---

### 💫 2-3. 회원 도메인 개발

- Concurrent HashMap

![Untitled 2](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/25275fc0-6568-469c-bef8-801035f9ed82)


---

### 💫 2-4. 회원 도메인 실행과 테스트

- 클래스 다이어그램 = 정적
- 객체 다이어그램 = 동적 → new해서 실제 들어가야 알 수 있기 때문.
- `new Member(1L, "memberA", Grade.*VIP*);` → ctrl + alt + v
    - `Member member = new Member(1L, "memberA", Grade.*VIP*);`
- 눈으로 잘되는지 확인? 노노 좋지않아
    
    → JUnit이라는 테스트 프로그램 쓸거임. 하나 만들면 됨
    
    ![Untitled 3](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/843f0b55-8209-4a5c-9552-2229bbb3d754)

    
    ![Untitled 4](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/e8e97b77-2720-42d3-a689-65c2b79a8cd5)

    
- 추상화에도, 구현체에도 의존하고있네..? 흠..

---

### 💫 2-5. 주문과 할인 도메인 설계

- 할인정책.. 변경가능성 많고 사장님 승인 안됬어요;_;, 그리고 안할수도..?
- **“역할과 구현을 분리” 해서 자유롭게 구현 객체를 조립할 수 있게 설계**하면 회원저장소, 할인 정책 등 변경가능성이 있는 부분들을 유연하게 변경이 가능하다.
- ***협력관계를 그대로 재사용이 가능함.***

---

### 💫 2-6. 주문과 할인 도메인 개발

![Untitled 5](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/14b1aaf4-be22-4b34-8919-84353a2fd9d6)


→ “F2” 키를 누르면 오류난 곳으로 바로 이동

---

### 💫 2-7. 주문과 할인 도메인 실행과 테스트

![Untitled 6](https://github.com/eejuuung/Spring_Study_Basic/assets/46306166/2306f280-8e18-4ec1-a03d-f2e146299c9b)


- 자바 뜨는 시간을 제외하면 많은 단위 테스트도 빠르게 실행이 가능함.

---
