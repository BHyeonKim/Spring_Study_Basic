## 🚙 HTTP API를 만들어보자

### 요구사항

- 회원 정보 관리 API : 회원 목록 조회, 회원 조회, 회원 등록, 회원 수정, 회원 삭제

### API URI(Uniform Resource Identifier)

- 리소스 식별을 기준으로 설계
  - 리소스 : *회원*이라는 개념 자체가 바로 **리소스**
  - 회원이라는 리소스를 식별하는 것이 중요함
  - CRUD 모두 배제
- **리소스와 행위를 분리**
  - 리소스는 명사, 행위는 동사

## 🚙 HTTP 메서드 - GET, POST

### HTTP 주요 메서드

- GET : 리소스 조회
- POST : 요청 데이터 처리, 주로 등록에 사용
- PUT : 리소스를 대체, 해당 리소스가 없으면 생성
- PATCH : 리소스 부분 변경
- DELETE : 리소스 삭제

### 기타 메서드

- HEAD, OPTIONS, CONNECT, TRACE

### GET

- 리소스 조회
- 서버에 전달하고 싶은 데이터는 query를 통해서 전달

### POST

- 요청 데이터 처리
- **메시지 바디를 통해 서버로 요청 데이터 전달**
- 메시지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행
- 주로 등록에 사용
  - 새 리소스 생성 : 서버가 아직 식별하지 않은 새 리소스 생성
- 리소스 URI에 POST 요청이 오면 데이터를 어떻게 처리할지 리소스마다 따로 정함
  - 요청 데이터 처리 : 단순히 데이터를 생성하거나 변경하느는 것을 넘어서 프로세스를 처리해야하는 경우
  - POST의 결과로 새로운 리소스가 생성되지 않거나 동사의 리소스가 생길 수 있음(**컨트롤 URI**)
- 다른 메서드로 처리하기 애매한 경우 POST 사용

## 🚙 HTTP 메서드 - PUT, PATCH, DELETE

### PUT

- **소스를 완전하게 대체**
  - 리소스가 있다면 대체하고 없으면 생성함
  - 부분적으로 수정되지 않고 전부 덮어쓰기
- **클라이언트가 리소스를 식별**
  - 클라이언트가 리소스의 경로를 알고 URI 지정하는 것이 POST와의 차이점

### PATCH

- 리소스 부분 변경

### DELETE

- 리소스 삭제

## 🚙 HTTP 메서드 속성

- 안전(Safe Methods)
- 멱등(Idempotent Methods)
- 캐시 가능(Cacheable Methods)

### 안전(Safe)

- 호출해도 리소스를 변경하지 않음
- 조회는 안전하고 변경이 일어나는 모든 것은 안전하지 않음
- 계속 호출해서 로그 같은 것들이 쌓여서 장애가 발생하는 점은 고려하지 않음

### 멱등(Idempotent)

- 한 번 호출하든 두 번 호출하든 100번 호출하든 결과가 똑같아야 함
  - GET : 몇 번 호출하든 같은 결과가 조회됨
  - PUT : 결과를 대체하기 때문에 같은 요청을 여러 번 해도 최종 결과 같음
  - DELETE : 몇 번 호출하든 삭제된 결과 똑같음
  - **POST** : **멱등이 아님!!**, 중복 호출
- 멱등은 자동 복구 매커니즘에 활용할 수 있음
  - 서버가 정상 응답을 못 주었을 때, 재실행해도 되는가?
- 재요청 중간에 다른 곳에서 리소스를 변경하는 등 외부 요인으로 중간에 리소스가 변경되는 것은 고려하지 않음

### 캐시가능(Cachealbe)

- 응답 결과 리소스를 캐시해서 사용해도 되는가?
- GET, HEAD, POST, PATCH 캐시 가능
- 실제로는 GET, HEAD 정도만 캐시로 사용
