# Section 6. HTTP 상태코드

## Http 상태코드 소개

2xx ⇒ 요청 정상 처리

3xx ⇒ 요청을 완료하려면 추가 행동이 필요

4xx ⇒ 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음

5xx ⇒ 서버 오류, 서버가 정상 요청을 처리하지 못함.

클라이언트가 인식할 수 없는 상태코드가 미래에 내려올 수 있음.

200이 아니라 299가 내려올 수 있어 근데 그냥 2백대는 아 요청이 정상적으로 처리된거네라고 생각하고 넘기면 된다.

1xx ⇒ 요청이 수신되어 처리중 ⇒ 실무에서 사용 안하므로 생략

## 2xx - 성공

2xx ⇒ 클라이언트의 요청이 성공함.

200 ok 결과 정상적으로 잘 처리 된것임.

202 accepted ⇒ 요청이 접수되었으나 처리가 완료되지 않았음.

204 no content ⇒ 서버가 요청을 성공적으로 수행했지만 응답 페이로드 본문에 보낼 데이터가 없음.

문서 편집기에서 save 버튼 할때 save 버튼 눌러도 내용은 변하면 안되잖아. 근데 내용은 서버로 전달되어야 하잖아. 204 메시지만으로 성공을 인식할 수 있는거지.

## 3xx ⇒ 리다이렉션1

예전에 /event 라는 url 을 사용했는데 지금은 새로 /new-event 라는 url 을 사용한단말이야.

그러면 클라이언트가 이벤트로 접근했을때 301 코드를쓰고 경로가 이동했다 하고 자동 리다이렉트되는거임.

그러면 그 다음 요청에는 200 ok 가 오게 되는거임.

위에 말한 경우가 영구 리다이렉션이고

일시 리다이렉션도 있는데 주문 완료 후에 주문 내역 화면으로 일시적으로 잠깐 이동하는것도 있음.  이때는 prg 라는 패턴을 굉장히 자주 쓴대.

특수 리다이렉션도 있음. 사용하는 캐시 만료되었나? 하고 서버에 전송하면 서버가 그 캐시 사용해도 됨. 하는거 결과대신 캐시 쓰라고 전송해 그게 특수 리다이렉션

301, 308 ⇒ 영구 리다이렉션

301 은 내가 Post 로 요청을 했을때 리다이렉트 시 요청 메서드가 get 으로 변하고 변경될 수 있음

308 은 post 를 처음에 사용해 그럼 서버가 308로 응답해줘 그러면 메세지 본문 유지해주고 post 도 그대로 해줘.

즉 이벤트에 바로 참여가 될 수 있는거임. 301과 308이 차이가 있지만 실무에서는 애매함.

301이 본문이 제거될 수 있음. 

302 307 303 ⇒ 일시적인 리다이렉션

실무에서 굉장히 많이 사용함.

302 found는 301 가 설명이 비슷함. 처음 스펙을 만들때는 대충 이러이러 하게 하다 하고 설정을 해두었는데 나중에 보니 변경할 필요가 있어서 307과 303 이 나오는거임. 302랑 기능은 같음. 307는 본문을 유지해줌. 요청 메서드도 변경되지 않음. 리다이렉트시 요청 메서드는 get으로 변경됨. 

PRG: Post/Redirect/Get

일시적인 리다이렉션

POST로 주문후에 웹 브라우저를 새로고침하면?

새로고침은 다시 요청하는것이기 때문에 중복 주문이 될 수 있음.

이걸 해결하려면 PRG 사용전에서 후로 바꿔야하는듯.

POST로 주문후에 주문결과화면을 GET 메서드로 리다이렉트해버리면 새로고침해도 결과 화면만 GET으로 계속 조회가 되는거임. 이렇게 해결하는거임.

그래서 뭘 써야 하나요?

정리니까 잘읽어보기

기타리다이렉션

## 4xx - 클라이언트 오류, 5xx - 서버 오류

4XX ⇒ 클라이언트 오류

문법등 오류의 원인이 클라이언트에 있음.

중요! ⇒ 클라이언트가 이미 잘못된 요청, 데이터를 보내고 있기 때문에, 똑같은 재시도가 실패함.

403을보면 권한이부족하구나 알수있기때문에 가끔 그냥 404를 보내버리기도 함.

5XX ⇒ 서버 오류

서버 문제로 오류 발생

서버에 문제가 있기 때문에 서버가 정상화되면 정상작동이 가능함.

웬만하면 서버에서 5XX를 만들면안돼. 진짜 서버에 문제가 생겼을때만 해야해. 뭐 고객의 잔고가 부족하다 이런건 5XX으로 하면 안돼. 왜냐하면 진짜 서버에 문제가 있을때만 5XX를 해야해. 모니터링하는사람이 있기때문임.
